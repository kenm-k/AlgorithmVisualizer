<!DOCTYPE html>
<html lang="ja">
<head>
  <meta charset="utf-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1" />
  <title>Graph Visualizer</title>
  <link rel="stylesheet" href="style.css" type="text/css">
  <script src="https://code.jquery.com/jquery-3.1.1.min.js"></script>
  <script src="https://frogcat.github.io/canvas-arrow/canvas-arrow.js"></script>
</head>
<body>

  <header>
    <div class="container navbar">
      <div class="brand">Graph<b>Visualizer</b></div>
    </div>
  </header>

  <h1 style="margin : 30px;"> Graph<b style="background: linear-gradient(90deg, var(--brand), var(--brand-2)); -webkit-background-clip: text; background-clip: text; color: transparent;">Visualizer</b></h1>

    <div style="margin: 30px;">
        <div>

            <div style="display: flex;">

                <section class="hgrp" style="clear: left; width: 50%; margin: 10px;">
                    <input type="file" accept="application/json">
                    <p><input type="number" min="0" max="0" id="frame"> / <span id="numberOfFrame">0</span>
                        <button onclick="if (!isPlaying){ playAnim(); }else{ stopFlag = true; }">再生/停止</button> <span id="animState">▶</span> </p>
                    <p> <button onclick="resetPos();">位置を戻す</button> </p>
                    <p><button onclick="convert();">JSON出力</button></p>

                </section>

                <div style="margin: 10px; border: 5px solid transparent; border-image: linear-gradient(to right, #080046, #9b8dff) 1; height: 450px; width: 50%; overflow: scroll;">

                    <details class="grp">
                    <summary class="brand"><b>レイアウト</b></summary>
                    <p class="brand"><b>※未実装です</b></p>
                    <select>
                        <option>Kamada-Kawaiのアルゴリズム</option>
                        <option>Fruchterman-Reingoldのアルゴリズム</option>
                        <option>木(Tilford-Reingoldのアルゴリズム)</option>
                        <option>森</option>
                    </select>
                    <p><button>レイアウト</button></p>

                    <details class="grp">
                        <summary class="brand"><b>根付き木 Tilford-Reingoldのアルゴリズム</b></summary>
                        <p>閉路の検知はまだ実装してないので、閉路がないようにしてください！</p>
                        <p>根 : <input id="ttreeRoot" type="number" value="0"></p>
                        <p>節同士の最短距離(px) : <input id="tdistBNodes" type="number" value="50"></p>
                        <select id="tmode">
                            <option value="default">親-子間の高さは一定</option>
                            <option value="fractal">自己相似(っぽい)</option>
                        </select>
                        <p><button onclick="tilford_raingold();">レイアウト</button></p>
                    </details>

                    </details>

                    <details class="grp">
                    <summary class="brand"><b>外観</b></summary>
                    <p>節の半径 : <input type="number" id="radius" min="0" value="25" onchange=" radius = this.value; drawRect(); fpoint = Math.floor(value/25*24); context.font = fpoint + 'px serif';"></p>
                    <p>キャンバスの幅 : <input type="number" id="cwidth" min="0" onchange="canvas.width = this.value;" value="800"> </p>
                    <p>キャンバスの高さ : <input type="number" id="cheight" min="0" onchange="canvas.height = this.value;" value="450"> </p>
                    <p>キャンバスの背景色 : <input type="color" style="width: 100px; height: 50px;" onchange="canvas.style.background = this.value;" value="#222222"></p>
                    </details>

                    <details class="grp">
                        <summary class="brand"><b>矢印</b></summary>
                        <p>矢印の幅 : <input type="number" min="0" value="5" onchange="arrowWidth = this.value; drawRect();"></p>
                        <p>頭の幅 : <input type="number" min="0" value="15" onchange="arrowHeadWidth = this.value; drawRect();"></p>
                        <p>頭の高さ : <input type="number" min="0" value="10" onchange="arrowHeadHeight = this.value; drawRect();"></p>
                    </details>
                    <details class="grp">
                        <summary class="brand"><b>アニメーション</b></summary>
                    </details>
                    <details class="grp">
                        <summary class="brand"><b>オブジェクト</b></summary>
                    </details>

                    <p style="margin: 30px;"> <button>JSON読み込み</button> <button>JSON出力</button> </p>

                </div>
            </div>

            <br>

            <div style="width: 100%; position: relative;">
                    <canvas id="canvas" width="800" height="450" style="position: absolute; left: 50%; transform: translate(-50%,0);"></canvas>

                <br>
                <br>
            </div>

        </div>
    </div>

    <br>

    <script src="script.js"></script>
    <script src="graphLayout.js"></script>
</body>
</html>
